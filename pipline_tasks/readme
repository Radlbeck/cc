Emulating the *nix '|' operator in c++
